<%# 新規投稿・投稿更新　エラーメッセージ %>
<% if flash[:false] %>
  <%= flash[:false] %>
<% end %>
<%# バリデーションエラー  %>
<% if @book.errors.any? %>
  <%= @book.errors.count %>件のエラーが発生しました
  <% @book.errors.full_messages.each do |book| %>
    <%= book %>
  <% end %>
<% end %>

<div class="container">
  <div class="row">
    <div class="col-md-3">
      <%# プロフィール編集 %>
      <h4 class="mt-4">User info</h4>
      <%= attachment_image_tag current_user, :profile_image, size: "60x60" , fallback: "no_image.jpg"%>
      <p class="border-top border-bottom pt-2 pb-2">name<%= current_user.name %></p>
      <p>introduction　<%= current_user.introduction %></p>
      <p><button class="bg-white w-100  rounded">
      <a href="/users/<%= current_user.id %>/edit"><i class="fas fa-user-cog text-secondary"></i></a>
        
      </button></p>
      <%# 新規投稿 %>
      <h4>New book</h4>
      <%= form_with model:@book,local:true do |f| %>
        <p>Title</p>
        <%= f.text_field :title,class:"w-100"%>
        <p class="mt-2">Opinion</p>
        <%= f.text_area :body,class:"w-100 " %>
        <p class="mt-2"><%= f.submit "Create Book",class:"text-white bg-success rounded border-0 pt-1 pb-1" %></p>
      <% end %>
    </div>
    <div class="col-md-8 offset-md-1">
      <%# 投稿一覧 %>
      <h2 class="mt-4">Books</h2>
      <table class="w-100">
        <tr class="w-100 border-top border-bottom">
          <td>　</td>
          <td class="pt-2 pb-2">Title</td>
          <td>Opinion</td>
        </tr>
        <% @books.each do |book| %>
          <tr class="border-top border-bottom">
            <td class="pt-2 pb-2"><%= link_to attachment_image_tag(book.user, :profile_image, size: "60x60" , fallback: "no_image.jpg"),user_path(book.user) %></td>
            <td><%= link_to "#{book.title}",book_path(book) %></td>
            <td><%= book.body %></td>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>